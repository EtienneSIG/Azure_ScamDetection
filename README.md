# Azure_ScamDetection

## Summary

This script uses the Azure Cognitive Services Computer Vision API and OpenAI GPT-4 API to analyze and tell if the image is an scams. It extracts the text from the image (OCR), sends it to the GPT-4 model for analysis.

Input :
(https://cdnx.nextinpact.com/data-next/image/bd/171324.jpeg)


Output : 
This message is likely a scam. Scam messages often use scare tactics to convince users that their computers are infected with viruses or other malware. They usually ask for personal information such as credit card details, or they may ask you to contact a certain number or visit a particular website. In this case, the message is asking you to call a number that is supposedly for Windows technical support. However, Microsoft does not make unsolicited phone calls or send out unsolicited email messages to request personal or financial information, or to provide technical support to fix your computer. Always be wary of any unsolicited message that requests for your personal information or involves money.

## Azure requirement
 - Have a computer vision service deployed in your tenant ( https://learn.microsoft.com/en-us/samples/azure/azure-quickstart-templates/cognitive-services-computer-vision-api/)
 - Have an Azure Open AI service with GPT4 in your tenant ( https://learn.microsoft.com/en-us/azure/ai-services/openai/how-to/create-resource?pivots=web-portal )
   
## Python requirement
### version
Version >= 3.1X

### Dependencies

- `azure.cognitiveservices.vision.computervision`
- `azure.cognitiveservices.vision.computervision.models`
- `msrest.authentication`
- `array`
- `os`
- `PIL`
- `sys`
- `time`
- `openai`
- `nltk`
- `json`

## Mandatory - Configuration
The script uses a configuration file (config.json) to load the following parameters:
- OPENAI_API_KEY: The API key for OpenAI.
- OPENAI_API_BASE: The base endpoint for OpenAI.
- OPENAI_NB_TOKENS: The maximum number of tokens to be generated by the model.
- COMPLETIONS_MODEL: The ID of the model to be used for completions.
- OPENAI_API_VERSION: The version of the OpenAI API to be used.

## Functions

### 1. `ComputerVision(endpoint, subscription_key, url_img)`

This function uses Azure's Computer Vision service to extract text from a given image URL. It authenticates with the service, sends a request to read the image, and waits for the result. Once the result is available, it prints the detected text line by line.

**Parameters:**

- `endpoint`: The endpoint of the Azure's Computer Vision service
- `subscription_key`: The subscription key for Azure's Computer Vision service
- `url_img`: The URL of the image to be analyzed

**Returns:**

- `prompt`: The text extracted from the image

### 2. `openaiTraduction(prompt, endpoint, key, model_id, api_version)`

This function uses OpenAI's GPT-3 model to translate the text extracted from the image. It initializes a client with the OpenAI service, sends a request for translation, and retrieves the result.

**Parameters:**

- `prompt`: The text to be translated
- `endpoint`: The endpoint of OpenAI's GPT-3 service
- `key`: The API key for OpenAI's GPT-3 service
- `model_id`: The ID of the GPT-3 model to be used
- `api_version`: The API version of OpenAI's GPT-3 service

**Returns:**

- `answer`: The translated text

### 3. `get_token_count(prompt)`

This function counts the number of tokens in a given text using the `nltk` library.

**Parameters:**

- `prompt`: The text to count the tokens for

**Returns:**

- The number of tokens in the text

## Command Line Execution
The script can be run from the command line with the following syntax:
```
python scamDetection.py -i <image or image url>
```
where `<image or image url>` is the name of the file to be anlayzed.

